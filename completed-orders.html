let query = supabaseClient
  .from("completed_orders")
  .select("order_id, order_code, customer_name, customer_contact, job_description, total_amount, advance_amount, pending_amount, assigned_to, created_at, completed_at");

const start = document.getElementById("startDate").value;
const end = document.getElementById("endDate").value;

// If only start date provided â†’ use today as default end
if (start && !end) {
  const today = new Date().toISOString().split("T")[0];
  query = query.gte("completed_at", start).lte("completed_at", today);
} else {
  if (start) query = query.gte("completed_at", start);
  if (end)   query = query.lte("completed_at", end);
}

const { data, error } = await query.order("completed_at", { ascending: false });
