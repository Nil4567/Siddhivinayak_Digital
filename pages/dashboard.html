<script src="../script.js"></script>
  <script>
    // 1. Authentication Check (from script.js)
    checkAuth(); // This now calls checkAccess() and initHeader()
    
    // ... existing dashboard helper functions (loadLocalJobs, getStatusClass, etc.) ...
    
    // ... existing renderDashboard() function ...

    // Initialize the dashboard
    document.addEventListener("DOMContentLoaded", function() {
        renderDashboard();
        
        // --- Access Control Navigation Filter (START) ---
        const userRole = localStorage.getItem("sv_user_role");
        const allowedPages = ACCESS_PERMISSIONS[userRole] || [];
        
        const navLinks = document.querySelectorAll('.sidebar .nav-link');
        
        navLinks.forEach(link => {
            const href = link.getAttribute('href');
            if (href) {
                const pageName = href.split('/').pop();
                
                // Hide the link if the current role doesn't have permission
                if (!allowedPages.includes(pageName)) {
                    link.style.display = 'none';
                }
            }
        });
        // --- Access Control Navigation Filter (END) ---
    });

</script>
</html>
