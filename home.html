<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const supabaseUrl = "https://YOUR_PROJECT.supabase.co";
  const supabaseKey = "YOUR_ANON_KEY";
  const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

  async function checkSession() {
    const { data: { session } } = await supabase.auth.getSession();

    if (session) {
      // Fetch role from profiles
      const { data: profile } = await supabase
        .from("profiles")
        .select("role")
        .eq("id", session.user.id)
        .single();

      if (profile.role === "admin") {
        window.location.href = "admin-dashboard.html";
      } else {
        window.location.href = "user-home.html";
      }
    }
  }

  checkSession();
</script>
