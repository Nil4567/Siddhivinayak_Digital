<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Siddhivinayak Digital — Home</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <header>
    <h1>Siddhivinayak Digital</h1>
    <p>Your trusted digital printing & services partner</p>
  </header>

  <div class="big-title">Siddhivinayak Digital</div>
  <div class="tagline">Printing • Xerox • Binding • Lamination • Designing</div>

  <div class="home-wrapper">
    <article class="brochure">
      <h3>Welcome to Siddhivinayak Digital</h3>
      <ul>
        <li>High-quality colour & black-white printing.</li>
        <li>Fast photocopying and bulk duplication.</li>
        <li>Professional binding and lamination.</li>
        <li>Custom design jobs.</li>
        <li>Digitization & scanning services.</li>
      </ul>
    </article>

    <!-- Login / Logout buttons -->
    <button id="loginBtn" class="btn-login">Login to Staff Dashboard</button>
    <button id="logoutBtn" class="btn-logout" style="display:none;">Logout</button>

    <div class="footer">© 2025 Siddhivinayak Digital. All rights reserved.</div>
  </div>

  <!-- Load Supabase config -->
  <script src="js/supabase-config.js"></script>

  <!-- Session check -->
  <script>
    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logoutBtn");

    async function checkSession() {
      const { data: { session } } = await supabaseClient.auth.getSession();

      if (session) {
        const { data: profile } = await supabaseClient
          .from("profiles")
          .select("role")
          .eq("id", session.user.id)
          .single();

        if (profile?.role === "admin") {
          window.location.href = "admin-dashboard.html";
        } else {
          window.location.href = "user-home.html";
        }
      }
    }

    loginBtn.addEventListener("click", () => {
      window.location.href = "index.html"; // go to login page
    });

    logoutBtn.addEventListener("click", async () => {
      await supabaseClient.auth.signOut();
      alert("Logged out successfully");
      loginBtn.style.display = "inline-block";
      logoutBtn.style.display = "none";
    });

    checkSession();
  </script>
</body>
</html>
